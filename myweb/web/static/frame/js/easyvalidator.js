$(function(){var a=-20;var b=20;$("[reg],[url]:not([reg]),[tip]").hover(function(f){if($(this).attr("tip")!=undefined){var d=(f.pageY+b);var c=(f.pageX+a);$("body").append('<p id="vtip"><img id="vtipArrow" src="/static/gac/images/vtip_arrow.png"/>'+$(this).attr("tip")+"</p>");$("p#vtip").css("top",d+"px").css("left",c+"px");$("p#vtip").bgiframe()}},function(){if($(this).attr("tip")!=undefined){$("p#vtip").remove()}}).mousemove(function(f){if($(this).attr("tip")!=undefined){var d=(f.pageY+b);var c=(f.pageX+a);$("p#vtip").css("top",d+"px").css("left",c+"px")}}).blur(function(){if($(this).attr("url")!=undefined){ajax_validate($(this))}else{if($(this).attr("reg")!=undefined){validate($(this))}}});$("form").submit(function(){var c=true;$(this).find("[reg],[url]:not([reg])").each(function(){if($(this).attr("reg")==undefined){if(!ajax_validate($(this))){c=false}}else{if(!validate($(this))){c=false}}});if(typeof(isExtendsValidate)!="undefined"){if(c&&isExtendsValidate){return extendsValidate()}}return c})});function validate(c){var b=new RegExp(c.attr("reg"));var a=c.attr("value");if(!b.test(a)){change_error_style(c,"add");change_tip(c,null,"remove");return false}else{if(c.attr("url")==undefined){change_error_style(c,"remove");change_tip(c,null,"remove");return true}else{return ajax_validate(c)}}}function ajax_validate(c){var b=c.attr("url");if(b.indexOf("?")!=-1){b=b+"&"+c.attr("name")+"="+c.attr("value")}else{b=b+"?"+c.attr("name")+"="+c.attr("value")}var a=$.ajax({url:b,cache:false,async:false}).responseText;a=a.replace(/(^\s*)|(\s*$)/g,"");if(a=="success"){change_error_style(c,"remove");change_tip(c,null,"remove");return true}else{change_error_style(c,"add");change_tip(c,a,"add");return false}}function change_tip(a,c,b){if(a.attr("tip")==undefined){a.attr("is_tip_null","yes")}if(b=="add"){if(a.attr("is_tip_null")=="yes"){a.attr("tip",c)}else{if(c!=null){if(a.attr("tip_bak")==undefined){a.attr("tip_bak",a.attr("tip"))}a.attr("tip",c)}}}else{if(a.attr("is_tip_null")=="yes"){a.removeAttr("tip");a.removeAttr("tip_bak")}else{a.attr("tip",a.attr("tip_bak"));a.removeAttr("tip_bak")}}}function change_error_style(a,b){if(b=="add"){a.addClass("input_validation-failed")}else{a.removeClass("input_validation-failed")}}$.fn.validate_callback=function(c,b,a){this.each(function(){if(b=="failed"){change_error_style($(this),"add");change_tip($(this),c,"add")}else{change_error_style($(this),"remove");change_tip($(this),null,"remove")}})};
